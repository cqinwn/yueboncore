{"version":3,"sources":["webpack:///./src/views/WeChat/BindUser.vue?697a","webpack:///src/views/WeChat/BindUser.vue","webpack:///./src/views/WeChat/BindUser.vue?c801","webpack:///./src/views/WeChat/BindUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","padding-bottom","attrs","span","inline","nativeOn","submit","$event","preventDefault","placeholder","model","value","callback","$$v","selectWeChat","expression","_l","item","key","label","float","_v","_s","color","font-size","selectCompany","_e","type","disabled","on","click","searchWeChatAccount","directives","name","rawName","width","data","tableData","highlight-current-row","selection-change","selsChange","prop","current-page","page","pageIndex","hide-on-single-page","page-sizes","page-size","pageSize","layout","total","pageTotal","size-change","handleSizeChange","current-change","handleCurrentChange","staticRenderFns","BindUservue_type_script_lang_js_","wechats","companys","listLoading","sels","created","getWeChats","getWeCompanys","methods","index","size","_this","pars","intPageIndex","intPageSize","strOrderByFileds","conditions","Object","api","then","res","console","log","success","response","dataCount","$message","message","_this2","forEach","element","push","publicAccount","publicNick","_this3","CompanyID","CompanyName","mounted","watch","newName","oldName","WeChat_BindUservue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-770e833a.0890b50d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-col',{staticClass:\"toolbar\",staticStyle:{\"padding-bottom\":\"0px\"},attrs:{\"span\":24}},[_c('el-form',{attrs:{\"inline\":true},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"请选择要操作的公众号\"},model:{value:(_vm.selectWeChat),callback:function ($$v) {_vm.selectWeChat=$$v},expression:\"selectWeChat\"}},_vm._l((_vm.wechats),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.label))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.value))])])}),1)],1),(_vm.selectWeChat)?_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"请选择要操作的客户\"},model:{value:(_vm.selectCompany),callback:function ($$v) {_vm.selectCompany=$$v},expression:\"selectCompany\"}},_vm._l((_vm.companys),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.label))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.value))])])}),1)],1):_vm._e(),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.selectWeChat=='' || _vm.selectCompany==''},on:{\"click\":_vm.searchWeChatAccount}},[_vm._v(\"刷新\")])],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.selsChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"SubFromPublicAccount\",\"label\":\"来自公众号\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"CompanyID\",\"label\":\"来自公司\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"SubUserOpenID\",\"label\":\"OpenID\",\"width\":\"300\"}}),_c('el-table-column',{attrs:{\"prop\":\"SubJobID\",\"label\":\"员工ID\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"SubUserRegTime\",\"label\":\"注册时间\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"SubUserRefTime\",\"label\":\"更新时间\",\"width\":\"200\"}})],1),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.page.pageIndex,\"hide-on-single-page\":true,\"page-sizes\":[10, 100, 500, 1000],\"page-size\":_vm.page.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page.pageTotal},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section>\r\n    <!--工具条-->\r\n    <el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\">\r\n      <el-form :inline=\"true\" @submit.native.prevent>\r\n        <el-form-item>\r\n          <el-select v-model=\"selectWeChat\" placeholder=\"请选择要操作的公众号\">\r\n            <el-option\r\n              v-for=\"item in wechats\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            >\r\n              <span style=\"float: left\">{{ item.label }}</span>\r\n              <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.value }}</span>\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"selectWeChat\">\r\n          <el-select v-model=\"selectCompany\" placeholder=\"请选择要操作的客户\">\r\n            <el-option\r\n              v-for=\"item in companys\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            >\r\n              <span style=\"float: left\">{{ item.label }}</span>\r\n              <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.value }}</span>\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" :disabled=\"selectWeChat=='' || selectCompany==''\" @click=\"searchWeChatAccount\">刷新</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n\r\n    <!--列表-->\r\n    <el-table\r\n      :data=\"tableData\"\r\n      highlight-current-row\r\n      v-loading=\"listLoading\"\r\n      @selection-change=\"selsChange\"\r\n      style=\"width: 100%;\"\r\n    > \r\n      <el-table-column type=\"index\" width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"SubFromPublicAccount\" label=\"来自公众号\" width=\"100\" ></el-table-column>\r\n      <el-table-column prop=\"CompanyID\" label=\"来自公司\" width=\"100\" ></el-table-column>\r\n      <el-table-column prop=\"SubUserOpenID\" label=\"OpenID\" width=\"300\" ></el-table-column>\r\n      <el-table-column prop=\"SubJobID\" label=\"员工ID\" width=\"150\" ></el-table-column>\r\n      <el-table-column prop=\"SubUserRegTime\" label=\"注册时间\" width=\"200\" ></el-table-column>\r\n      <el-table-column prop=\"SubUserRefTime\" label=\"更新时间\" width=\"200\" ></el-table-column>\r\n      \r\n    </el-table>\r\n    <!--工具条-->\r\n    <div class=\"block\"> \r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"page.pageIndex\"\r\n      :hide-on-single-page=\"true\"\r\n      :page-sizes=\"[10, 100, 500, 1000]\"\r\n      :page-size=\"page.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"page.pageTotal\">\r\n    </el-pagination>\r\n  </div> \r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { getWeChatBindUser, getWeChatAccount,getWeChatCompany } from \"../../api/api\";\r\nexport default {\r\n  name: \"WeChatCompany\",\r\n  data() {\r\n    return {\r\n      wechats: [], //微信公众号列表\r\n      companys: [], //客户列表\r\n      selectWeChat: \"\", //当前选中的微信公众号 \r\n      selectCompany: \"\", //当前选中的微信客户\r\n      listLoading: false,\r\n      tableData: [],\r\n      sels: [],\r\n      page: {\r\n        pageSize: 10,\r\n        pageIndex: 1,\r\n        pageTotal: 0\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getWeChats();\r\n    this.getWeCompanys();\r\n  },\r\n  methods: {\r\n    selsChange(sels) {\r\n      this.sels = sels;\r\n    },\r\n    handleCurrentChange(index) {\r\n      this.page.pageIndex = index;\r\n      this.searchWeChatAccount();\r\n    },\r\n    handleSizeChange(size){ \r\n      this.page.pageIndex = 1;\r\n      this.page.pageSize = size;\r\n      this.searchWeChatAccount();\r\n    },\r\n    searchWeChatAccount() {\r\n      if(this.selectWeChat == '' || this.selectCompany=='') return;\r\n      this.listLoading = true;  \r\n      var pars = {\r\n        intPageIndex: this.page.pageIndex,\r\n        intPageSize: this.page.pageSize,\r\n        strOrderByFileds: \"SubFromPublicAccount asc\",\r\n        conditions:\"SubFromPublicAccount = \" + this.selectWeChat + \" & \" + \"IsUnBind = false\"\r\n      };\r\n      if(this.selectCompany){\r\n        pars.conditions += \"& CompanyID = \"+this.selectCompany\r\n      }\r\n      getWeChatBindUser(pars).then(res => {\r\n        this.listLoading = false;\r\n        console.log(res);\r\n        if (res.data.success) {\r\n          this.tableData = res.data.response.data;\r\n          this.page.pageTotal = res.data.response.dataCount;\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"获取成功!\"\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getWeChats() {\r\n      getWeChatAccount().then(res => {\r\n        this.wechats = [];\r\n        res.data.response.data.forEach(element => {\r\n          this.wechats.push({\r\n            value: element.publicAccount,\r\n            label: element.publicNick\r\n          });\r\n        });\r\n      });\r\n    },\r\n    getWeCompanys() {\r\n      getWeChatCompany().then(res => {\r\n        this.companys = [];\r\n        console.log(res);\r\n        res.data.response.data.forEach(element => {\r\n          this.companys.push({\r\n            value: element.CompanyID,\r\n            label: element.CompanyName\r\n          });\r\n        });\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    let that = this;\r\n  },\r\n  watch: {\r\n    selectWeChat: function(newName, oldName) {\r\n      this.page.pageIndex = 1;\r\n      this.searchWeChatAccount();\r\n    },\r\n    selectCompany: function(newName, oldName) {\r\n      this.page.pageIndex = 1;\r\n      this.searchWeChatAccount();\r\n    }\r\n  }\r\n};\r\n</script> \r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BindUser.vue?vue&type=template&id=57af1ddd&\"\nimport script from \"./BindUser.vue?vue&type=script&lang=js&\"\nexport * from \"./BindUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"BindUser.vue\"\nexport default component.exports"],"sourceRoot":""}